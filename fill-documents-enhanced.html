<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fill Documents - Immigr-Aid.ai</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #ffffff;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Header */
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px 0;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .logo {
            font-size: 2.5rem;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .tagline {
            color: #7f8c8d;
            font-size: 1.1rem;
        }
        
        /* Language Selector */
        .language-selector {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .language-selector select {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 0.9rem;
        }
        
        /* Progress Bar */
        .progress-container {
            margin-bottom: 30px;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #ecf0f1;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #2ecc71);
            width: 75%;
            transition: width 0.3s ease;
        }
        
        .progress-text {
            text-align: center;
            margin-top: 10px;
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        
        /* Step Header */
        .step-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .step-number {
            background: #3498db;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
        }
        
        .step-title {
            font-size: 1.8rem;
            font-weight: 600;
            color: #2c3e50;
        }
        
        /* AI Helper */
        .ai-helper {
            background: #e8f4fd;
            border: 1px solid #3498db;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .ai-helper-title {
            font-weight: 600;
            color: #2980b9;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .ai-helper-text {
            color: #2c3e50;
            font-size: 0.9rem;
        }
        
        /* Document Support Panel */
        .document-support {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .document-support-title {
            font-weight: 600;
            color: #856404;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .document-support-content {
            color: #856404;
            font-size: 0.9rem;
        }
        
        /* Form Fields */
        .form-field {
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            background: #f8f9fa;
            position: relative;
        }
        
        .form-field label {
            font-weight: 500;
            color: #2c3e50;
            margin-bottom: 8px;
            display: block;
        }
        
        .form-field input,
        .form-field select,
        .form-field textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 0.9rem;
            margin-bottom: 8px;
        }
        
        .form-field textarea {
            min-height: 80px;
            resize: vertical;
        }
        
        /* Help Button */
        .help-button {
            background: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 6px 10px;
            font-size: 0.8rem;
            cursor: pointer;
            margin-top: 5px;
        }
        
        .help-button:hover {
            background: #2980b9;
        }
        
        /* Help Content */
        .help-content {
            background: #e8f4fd;
            border: 1px solid #3498db;
            border-radius: 6px;
            padding: 12px;
            margin-top: 10px;
            font-size: 0.85rem;
            color: #2c3e50;
            display: none;
        }
        
        .help-content.show {
            display: block;
            animation: slideDown 0.3s ease-out;
        }
        
        .help-content strong {
            color: #2980b9;
        }
        
        /* Navigation Buttons */
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            gap: 20px;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }
        
        .btn-primary {
            background: #3498db;
            color: white;
        }
        
        .btn-primary:hover {
            background: #2980b9;
        }
        
        .btn-secondary {
            background: #95a5a6;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #7f8c8d;
        }
        
        .btn-success {
            background: #27ae60;
            color: white;
        }
        
        .btn-success:hover {
            background: #229954;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .navigation-buttons {
                flex-direction: column;
            }
        }
        
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Language Selector -->
        <div class="language-selector">
            <label for="languageSelect">üåç</label>
            <select id="languageSelect">
                <option value="en">English</option>
                <option value="es">Espa√±ol</option>
            </select>
        </div>
        
        <!-- Header -->
        <div class="header">
            <div class="logo">Immigr-Aid.ai</div>
            <div class="tagline" data-translate="tagline">Your Personal AI Immigration Assistant</div>
        </div>
        
        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill"></div>
            </div>
            <div class="progress-text" data-translate="step3">Step 3 of 3</div>
        </div>
        
        <!-- Step Header -->
        <div class="step-header">
            <div class="step-number">3</div>
            <div class="step-title" data-translate="fillDocuments">Fill Out Your Documents</div>
        </div>
        
        <!-- AI Helper -->
        <div class="ai-helper">
            <div class="ai-helper-title">
                ü§ñ <span data-translate="aiAssistant">AI Assistant</span>
            </div>
            <div class="ai-helper-text" id="aiHelperText" data-translate="aiHelperDefault">
                I'll help you fill out your immigration documents accurately. All instructions will be in your selected language.
            </div>
        </div>
        
        <!-- Document Support Panel -->
        <div class="document-support" id="documentSupport">
            <div class="document-support-title">
                üìã <span data-translate="documentSupport">Document Support</span>
            </div>
            <div class="document-support-content" id="documentSupportContent">
                <p data-translate="documentSupportText">I'll guide you through each field with specific help and requirements in your language.</p>
                <ul class="support-checklist" id="supportChecklist">
                    <li data-translate="helpTip1">Click the Help button next to any field for detailed assistance</li>
                    <li data-translate="helpTip2">All required fields are marked with *</li>
                    <li data-translate="helpTip3">I'll validate your information as you type</li>
                    <li data-translate="helpTip4">Your progress is saved automatically</li>
                </ul>
            </div>
        </div>
        
        <!-- Document Content -->
        <div id="documentContent">
            <!-- Form content will be loaded here -->
        </div>
        
        <!-- Navigation Buttons -->
        <div class="navigation-buttons">
            <button class="btn btn-secondary" onclick="goBack()" data-translate="back">Back</button>
            <button class="btn btn-primary" onclick="saveProgress()" data-translate="saveProgress">Save Progress</button>
            <button class="btn btn-success" onclick="submitApplication()" data-translate="submitApplication">Submit Application</button>
        </div>
    </div>
    
    <script>
        let currentLanguage = 'en';
        let selectedFormType = 'citizenship';
        
        // Comprehensive translations for EVERY text element
        const translations = {
            en: {
                tagline: "Your Personal AI Immigration Assistant",
                step3: "Step 3 of 3",
                fillDocuments: "Fill Out Your Documents",
                aiAssistant: "AI Assistant",
                aiHelperDefault: "I'll help you fill out your immigration documents accurately. All instructions will be in your selected language.",
                documentSupport: "Document Support",
                documentSupportText: "I'll guide you through each field with specific help and requirements in your language.",
                helpTip1: "Click the Help button next to any field for detailed assistance",
                helpTip2: "All required fields are marked with *",
                helpTip3: "I'll validate your information as you type",
                helpTip4: "Your progress is saved automatically",
                back: "Back",
                saveProgress: "Save Progress",
                submitApplication: "Submit Application",
                
                // Form field labels
                formType: "Form Type",
                applicantName: "Full Name",
                dateOfBirth: "Date of Birth",
                countryOfBirth: "Country of Birth",
                alienNumber: "Alien Registration Number (A-Number)",
                greenCardNumber: "Green Card Number",
                dateOfPermanentResidence: "Date Became Permanent Resident",
                currentAddress: "Current Address",
                phoneNumber: "Phone Number",
                emailAddress: "Email Address",
                maritalStatus: "Marital Status",
                spouseName: "Spouse Name",
                children: "Children Information",
                employmentHistory: "Employment History",
                travelHistory: "Travel History",
                criminalHistory: "Criminal History",
                englishProficiency: "English Proficiency",
                civicsKnowledge: "Civics Knowledge",
                
                // Placeholders
                enterFullName: "Enter your full legal name",
                selectCountry: "Select Country",
                enterANumber: "A-123456789",
                enterGreenCardNumber: "123456789",
                enterCompleteAddress: "Enter your complete current address",
                enterPhoneNumber: "(555) 123-4567",
                enterEmail: "your.email@example.com",
                selectStatus: "Select Status",
                enterSpouseName: "Enter spouse's full name",
                listChildren: "List all children with names, dates of birth, and countries of birth",
                listEmployment: "List your employment history for the last 5 years",
                listTravel: "List all trips outside the US in the last 5 years",
                discloseCriminal: "Disclose any arrests, citations, or convictions",
                selectLevel: "Select Level",
                
                // Options
                single: "Single",
                married: "Married",
                divorced: "Divorced",
                widowed: "Widowed",
                nativeSpeaker: "Native Speaker",
                fluent: "Fluent",
                good: "Good",
                fair: "Fair",
                basic: "Basic",
                excellent: "Excellent",
                needsStudy: "Needs Study",
                
                // AI Help Messages
                aiHelp: "AI Help:",
                aiHelpName: "Enter your legal first and last name exactly as it appears on your birth certificate or passport. Don't use nicknames or shortened versions.",
                aiHelpBirth: "Enter your exact date of birth as shown on your birth certificate. Use MM/DD/YYYY format.",
                aiHelpCountry: "Select the country where you were born. This should match your birth certificate exactly.",
                aiHelpANumber: "Enter your Alien Registration Number (A-Number) exactly as it appears on your Green Card. Format: A-123456789",
                aiHelpGreenCard: "Enter your Green Card number exactly as it appears on your card. This is usually 9 digits.",
                aiHelpResidence: "Enter the date you became a permanent resident. This is usually found on your Green Card.",
                aiHelpAddress: "Enter your complete current address including street number, apartment/unit number, city, state, ZIP code, and country if outside US.",
                aiHelpPhone: "Enter your current phone number where USCIS can reach you. Include area code and use US format: (555) 123-4567",
                aiHelpEmail: "Enter a valid email address where USCIS can send you updates about your case. Check this email regularly.",
                aiHelpMarital: "Select your current marital status. This affects your eligibility requirements.",
                aiHelpSpouse: "If you are married, enter your spouse's full legal name exactly as it appears on their birth certificate or passport.",
                aiHelpChildren: "List all your children with their full names, dates of birth, and countries of birth. Include stepchildren and adopted children.",
                aiHelpEmployment: "List all jobs you've had in the last 5 years including employer name, job title, start and end dates, and address.",
                aiHelpTravel: "List all trips you've taken outside the US in the last 5 years including destination, departure date, return date, and purpose.",
                aiHelpCriminal: "Disclose any arrests, citations, or convictions. Include traffic violations that resulted in fines over $500 or jail time.",
                aiHelpEnglish: "Select your English proficiency level. You'll need to pass an English test during your interview.",
                aiHelpCivics: "Select your knowledge of US history and government. You'll need to pass a civics test during your interview.",
                
                // Success/Error Messages
                progressSaved: "Progress saved successfully!",
                applicationSubmitted: "Application submitted successfully! You will receive a confirmation email shortly.",
                pleaseFillRequired: "Please fill in all required fields marked with *",
                pageTranslated: "Page translated to",
                
                // AI Processing Messages
                aiProcessing1: "AI is validating your information...",
                aiProcessing2: "AI is checking for common errors...",
                aiProcessing3: "AI is generating your application...",
                aiProcessing4: "AI is preparing submission...",
                
                // Form-specific translations
                citizenship: {
                    title: "Citizenship Application (Form N-400)",
                    aiHelper: "I'll help you fill out the citizenship application accurately. Make sure to provide accurate information about your residence and immigration history.",
                    supportText: "Citizenship Application Support - I'll guide you through each field with specific help and requirements.",
                    supportTip1: "You must be a permanent resident for 5 years (or 3 if married to US citizen)",
                    supportTip2: "Continuous residence and physical presence required",
                    supportTip3: "Good moral character evidence required",
                    supportTip4: "English and civics test preparation needed"
                }
            },
            es: {
                tagline: "Tu Asistente Personal de IA para Inmigraci√≥n",
                step3: "Paso 3 de 3",
                fillDocuments: "Completar Sus Documentos",
                aiAssistant: "Asistente IA",
                aiHelperDefault: "Te ayudo a completar tus documentos de inmigraci√≥n con precisi√≥n. Todas las instrucciones estar√°n en tu idioma seleccionado.",
                documentSupport: "Soporte de Documentos",
                documentSupportText: "Te guiar√© a trav√©s de cada campo con ayuda espec√≠fica y requisitos en tu idioma.",
                helpTip1: "Haz clic en el bot√≥n Ayuda junto a cualquier campo para obtener asistencia detallada",
                helpTip2: "Todos los campos requeridos est√°n marcados con *",
                helpTip3: "Validar√© tu informaci√≥n mientras escribes",
                helpTip4: "Tu progreso se guarda autom√°ticamente",
                back: "Atr√°s",
                saveProgress: "Guardar Progreso",
                submitApplication: "Enviar Solicitud",
                
                // Spanish form field labels
                formType: "Tipo de Formulario",
                applicantName: "Nombre Completo",
                dateOfBirth: "Fecha de Nacimiento",
                countryOfBirth: "Pa√≠s de Nacimiento",
                alienNumber: "N√∫mero de Registro de Extranjero (A-Number)",
                greenCardNumber: "N√∫mero de Tarjeta Verde",
                dateOfPermanentResidence: "Fecha de Residencia Permanente",
                currentAddress: "Direcci√≥n Actual",
                phoneNumber: "N√∫mero de Tel√©fono",
                emailAddress: "Direcci√≥n de Correo Electr√≥nico",
                maritalStatus: "Estado Civil",
                spouseName: "Nombre del C√≥nyuge",
                children: "Informaci√≥n de Hijos",
                employmentHistory: "Historial de Empleo",
                travelHistory: "Historial de Viajes",
                criminalHistory: "Historial Criminal",
                englishProficiency: "Competencia en Ingl√©s",
                civicsKnowledge: "Conocimiento C√≠vico",
                
                // Spanish placeholders
                enterFullName: "Ingrese su nombre legal completo",
                selectCountry: "Seleccionar Pa√≠s",
                enterANumber: "A-123456789",
                enterGreenCardNumber: "123456789",
                enterCompleteAddress: "Ingrese su direcci√≥n actual completa",
                enterPhoneNumber: "(555) 123-4567",
                enterEmail: "su.correo@ejemplo.com",
                selectStatus: "Seleccionar Estado",
                enterSpouseName: "Ingrese el nombre completo del c√≥nyuge",
                listChildren: "Liste todos los hijos con nombres, fechas de nacimiento y pa√≠ses de nacimiento",
                listEmployment: "Liste su historial de empleo de los √∫ltimos 5 a√±os",
                listTravel: "Liste todos los viajes fuera de EE.UU. en los √∫ltimos 5 a√±os",
                discloseCriminal: "Revele cualquier arresto, citaci√≥n o condena",
                selectLevel: "Seleccionar Nivel",
                
                // Spanish options
                single: "Soltero",
                married: "Casado",
                divorced: "Divorciado",
                widowed: "Viudo",
                nativeSpeaker: "Hablante Nativo",
                fluent: "Fluido",
                good: "Bueno",
                fair: "Regular",
                basic: "B√°sico",
                excellent: "Excelente",
                needsStudy: "Necesita Estudiar",
                
                // Spanish AI Help Messages
                aiHelp: "Ayuda IA:",
                aiHelpName: "Ingrese su nombre legal completo exactamente como aparece en su certificado de nacimiento o pasaporte. No use apodos o versiones abreviadas.",
                aiHelpBirth: "Ingrese su fecha de nacimiento exacta como se muestra en su certificado de nacimiento. Use formato MM/DD/AAAA.",
                aiHelpCountry: "Seleccione el pa√≠s donde naci√≥. Esto debe coincidir exactamente con su certificado de nacimiento.",
                aiHelpANumber: "Ingrese su N√∫mero de Registro de Extranjero (A-Number) exactamente como aparece en su Tarjeta Verde. Formato: A-123456789",
                aiHelpGreenCard: "Ingrese el n√∫mero de su Tarjeta Verde exactamente como aparece en su tarjeta. Generalmente son 9 d√≠gitos.",
                aiHelpResidence: "Ingrese la fecha en que se convirti√≥ en residente permanente. Esto generalmente se encuentra en su Tarjeta Verde.",
                aiHelpAddress: "Ingrese su direcci√≥n actual completa incluyendo n√∫mero de calle, apartamento/unidad, ciudad, estado, c√≥digo postal y pa√≠s si est√° fuera de EE.UU.",
                aiHelpPhone: "Ingrese su n√∫mero de tel√©fono actual donde USCIS puede contactarlo. Incluya c√≥digo de √°rea y use formato estadounidense: (555) 123-4567",
                aiHelpEmail: "Ingrese una direcci√≥n de correo electr√≥nico v√°lida donde USCIS puede enviarle actualizaciones sobre su caso. Revise este correo regularmente.",
                aiHelpMarital: "Seleccione su estado civil actual. Esto afecta sus requisitos de elegibilidad.",
                aiHelpSpouse: "Si est√° casado, ingrese el nombre legal completo de su c√≥nyuge exactamente como aparece en su certificado de nacimiento o pasaporte.",
                aiHelpChildren: "Liste todos sus hijos con sus nombres completos, fechas de nacimiento y pa√≠ses de nacimiento. Incluya hijastros e hijos adoptados.",
                aiHelpEmployment: "Liste todos los trabajos que ha tenido en los √∫ltimos 5 a√±os incluyendo nombre del empleador, t√≠tulo del trabajo, fechas de inicio y fin, y direcci√≥n.",
                aiHelpTravel: "Liste todos los viajes que ha tomado fuera de EE.UU. en los √∫ltimos 5 a√±os incluyendo destino, fecha de salida, fecha de regreso y prop√≥sito.",
                aiHelpCriminal: "Revele cualquier arresto, citaci√≥n o condena. Incluya violaciones de tr√°fico que resultaron en multas de m√°s de $500 o tiempo en c√°rcel.",
                aiHelpEnglish: "Seleccione su nivel de competencia en ingl√©s. Necesitar√° aprobar una prueba de ingl√©s durante su entrevista.",
                aiHelpCivics: "Seleccione su conocimiento de la historia y gobierno de EE.UU. Necesitar√° aprobar una prueba c√≠vica durante su entrevista.",
                
                // Spanish Success/Error Messages
                progressSaved: "¬°Progreso guardado exitosamente!",
                applicationSubmitted: "¬°Solicitud enviada exitosamente! Recibir√° un correo de confirmaci√≥n pronto.",
                pleaseFillRequired: "Por favor complete todos los campos requeridos marcados con *",
                pageTranslated: "P√°gina traducida a",
                
                // Spanish AI Processing Messages
                aiProcessing1: "IA est√° validando su informaci√≥n...",
                aiProcessing2: "IA est√° verificando errores comunes...",
                aiProcessing3: "IA est√° generando su solicitud...",
                aiProcessing4: "IA est√° preparando el env√≠o...",
                
                // Spanish form-specific translations
                citizenship: {
                    title: "Solicitud de Ciudadan√≠a (Formulario N-400)",
                    aiHelper: "Te ayudo a completar la solicitud de ciudadan√≠a con precisi√≥n. Aseg√∫rate de proporcionar informaci√≥n precisa sobre tu residencia e historial de inmigraci√≥n.",
                    supportText: "Soporte de Solicitud de Ciudadan√≠a - Te guiar√© a trav√©s de cada campo con ayuda espec√≠fica y requisitos.",
                    supportTip1: "Debes ser residente permanente por 5 a√±os (o 3 si est√°s casado con ciudadano estadounidense)",
                    supportTip2: "Se requiere residencia continua y presencia f√≠sica",
                    supportTip3: "Se requiere evidencia de buen car√°cter moral",
                    supportTip4: "Se necesita preparaci√≥n para pruebas de ingl√©s y civismo"
                }
            }
        };
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initializeLanguageSelector();
            detectFormType();
            loadDocumentTemplate();
            loadSavedData();
        });
        
        function initializeLanguageSelector() {
            const languageSelect = document.getElementById('languageSelect');
            languageSelect.addEventListener('change', function() {
                currentLanguage = this.value;
                translatePage();
            });
        }
        
        function detectFormType() {
            const urlParams = new URLSearchParams(window.location.search);
            const formType = urlParams.get('form');
            
            if (formType) {
                selectedFormType = formType;
                localStorage.setItem('selectedFormType', formType);
            } else {
                selectedFormType = localStorage.getItem('selectedFormType') || 'citizenship';
            }
            
            updateFormForType(selectedFormType);
        }
        
        function updateFormForType(formType) {
            const aiHelperText = document.getElementById('aiHelperText');
            const documentSupportContent = document.getElementById('documentSupportContent');
            
            const formTranslations = translations[currentLanguage][formType];
            
            if (formTranslations) {
                aiHelperText.textContent = formTranslations.aiHelper;
                documentSupportContent.innerHTML = `
                    <p>${formTranslations.supportText}</p>
                    <ul class="support-checklist">
                        <li data-translate="helpTip1">Click the Help button next to any field for detailed assistance</li>
                        <li data-translate="helpTip2">All required fields are marked with *</li>
                        <li data-translate="helpTip3">I'll validate your information as you type</li>
                        <li data-translate="helpTip4">Your progress is saved automatically</li>
                        <li>${formTranslations.supportTip1}</li>
                        <li>${formTranslations.supportTip2}</li>
                        <li>${formTranslations.supportTip3}</li>
                        <li>${formTranslations.supportTip4}</li>
                    </ul>
                `;
            }
        }
        
        function loadDocumentTemplate() {
            const documentContent = document.getElementById('documentContent');
            
            switch(selectedFormType) {
                case 'citizenship':
                    loadCitizenshipForm();
                    break;
                default:
                    loadCitizenshipForm();
            }
        }
        
        function loadCitizenshipForm() {
            const documentContent = document.getElementById('documentContent');
            documentContent.innerHTML = `
                <div class="form-field">
                    <label for="applicantName">Full Name *</label>
                    <input type="text" id="applicantName" required placeholder="Enter your full legal name">
                    <button class="help-button" onclick="showFieldHelp('applicantName')">Help</button>
                    <div class="help-content" id="applicantName-help">
                        <strong data-translate="aiHelp">AI Help:</strong> <span data-translate="aiHelpName">Enter your legal first and last name exactly as it appears on your birth certificate or passport. Don't use nicknames or shortened versions.</span>
                    </div>
                </div>
                
                <div class="form-field">
                    <label for="dateOfBirth">Date of Birth *</label>
                    <input type="date" id="dateOfBirth" required>
                    <button class="help-button" onclick="showFieldHelp('dateOfBirth')">Help</button>
                    <div class="help-content" id="dateOfBirth-help">
                        <strong data-translate="aiHelp">AI Help:</strong> <span data-translate="aiHelpBirth">Enter your exact date of birth as shown on your birth certificate. Use MM/DD/YYYY format.</span>
                    </div>
                </div>
                
                <div class="form-field">
                    <label for="countryOfBirth">Country of Birth *</label>
                    <select id="countryOfBirth" required>
                        <option value="">Select Country</option>
                        <option value="Mexico">Mexico</option>
                        <option value="China">China</option>
                        <option value="India">India</option>
                        <option value="Philippines">Philippines</option>
                        <option value="Other">Other</option>
                    </select>
                    <button class="help-button" onclick="showFieldHelp('countryOfBirth')">Help</button>
                    <div class="help-content" id="countryOfBirth-help">
                        <strong data-translate="aiHelp">AI Help:</strong> <span data-translate="aiHelpCountry">Select the country where you were born. This should match your birth certificate exactly.</span>
                    </div>
                </div>
                
                <div class="form-field">
                    <label for="alienNumber">Alien Registration Number (A-Number) *</label>
                    <input type="text" id="alienNumber" required placeholder="A-123456789">
                    <button class="help-button" onclick="showFieldHelp('alienNumber')">Help</button>
                    <div class="help-content" id="alienNumber-help">
                        <strong data-translate="aiHelp">AI Help:</strong> <span data-translate="aiHelpANumber">Enter your Alien Registration Number (A-Number) exactly as it appears on your Green Card. Format: A-123456789</span>
                    </div>
                </div>
                
                <div class="form-field">
                    <label for="greenCardNumber">Green Card Number *</label>
                    <input type="text" id="greenCardNumber" required placeholder="123456789">
                    <button class="help-button" onclick="showFieldHelp('greenCardNumber')">Help</button>
                    <div class="help-content" id="greenCardNumber-help">
                        <strong data-translate="aiHelp">AI Help:</strong> <span data-translate="aiHelpGreenCard">Enter your Green Card number exactly as it appears on your card. This is usually 9 digits.</span>
                    </div>
                </div>
                
                <div class="form-field">
                    <label for="dateOfPermanentResidence">Date Became Permanent Resident *</label>
                    <input type="date" id="dateOfPermanentResidence" required>
                    <button class="help-button" onclick="showFieldHelp('dateOfPermanentResidence')">Help</button>
                    <div class="help-content" id="dateOfPermanentResidence-help">
                        <strong data-translate="aiHelp">AI Help:</strong> <span data-translate="aiHelpResidence">Enter the date you became a permanent resident. This is usually found on your Green Card.</span>
                    </div>
                </div>
                
                <div class="form-field">
                    <label for="currentAddress">Current Address *</label>
                    <textarea id="currentAddress" required placeholder="Enter your complete current address"></textarea>
                    <button class="help-button" onclick="showFieldHelp('currentAddress')">Help</button>
                    <div class="help-content" id="currentAddress-help">
                        <strong data-translate="aiHelp">AI Help:</strong> <span data-translate="aiHelpAddress">Enter your complete current address including street number, apartment/unit number, city, state, ZIP code, and country if outside US.</span>
                    </div>
                </div>
                
                <div class="form-field">
                    <label for="phoneNumber">Phone Number *</label>
                    <input type="tel" id="phoneNumber" required placeholder="(555) 123-4567">
                    <button class="help-button" onclick="showFieldHelp('phoneNumber')">Help</button>
                    <div class="help-content" id="phoneNumber-help">
                        <strong data-translate="aiHelp">AI Help:</strong> <span data-translate="aiHelpPhone">Enter your current phone number where USCIS can reach you. Include area code and use US format: (555) 123-4567</span>
                    </div>
                </div>
                
                <div class="form-field">
                    <label for="emailAddress">Email Address *</label>
                    <input type="email" id="emailAddress" required placeholder="your.email@example.com">
                    <button class="help-button" onclick="showFieldHelp('emailAddress')">Help</button>
                    <div class="help-content" id="emailAddress-help">
                        <strong data-translate="aiHelp">AI Help:</strong> <span data-translate="aiHelpEmail">Enter a valid email address where USCIS can send you updates about your case. Check this email regularly.</span>
                    </div>
                </div>
                
                <div class="form-field">
                    <label for="maritalStatus">Marital Status *</label>
                    <select id="maritalStatus" required>
                        <option value="">Select Status</option>
                        <option value="Single">Single</option>
                        <option value="Married">Married</option>
                        <option value="Divorced">Divorced</option>
                        <option value="Widowed">Widowed</option>
                    </select>
                    <button class="help-button" onclick="showFieldHelp('maritalStatus')">Help</button>
                    <div class="help-content" id="maritalStatus-help">
                        <strong data-translate="aiHelp">AI Help:</strong> <span data-translate="aiHelpMarital">Select your current marital status. This affects your eligibility requirements.</span>
                    </div>
                </div>
                
                <div class="form-field">
                    <label for="spouseName">Spouse Name (if applicable)</label>
                    <input type="text" id="spouseName" placeholder="Enter spouse's full name">
                    <button class="help-button" onclick="showFieldHelp('spouseName')">Help</button>
                    <div class="help-content" id="spouseName-help">
                        <strong data-translate="aiHelp">AI Help:</strong> <span data-translate="aiHelpSpouse">If you are married, enter your spouse's full legal name exactly as it appears on their birth certificate or passport.</span>
                    </div>
                </div>
                
                <div class="form-field">
                    <label for="children">Children Information</label>
                    <textarea id="children" placeholder="List all children with names, dates of birth, and countries of birth"></textarea>
                    <button class="help-button" onclick="showFieldHelp('children')">Help</button>
                    <div class="help-content" id="children-help">
                        <strong data-translate="aiHelp">AI Help:</strong> <span data-translate="aiHelpChildren">List all your children with their full names, dates of birth, and countries of birth. Include stepchildren and adopted children.</span>
                    </div>
                </div>
                
                <div class="form-field">
                    <label for="employmentHistory">Employment History (Last 5 Years) *</label>
                    <textarea id="employmentHistory" required placeholder="List your employment history for the last 5 years"></textarea>
                    <button class="help-button" onclick="showFieldHelp('employmentHistory')">Help</button>
                    <div class="help-content" id="employmentHistory-help">
                        <strong data-translate="aiHelp">AI Help:</strong> <span data-translate="aiHelpEmployment">List all jobs you've had in the last 5 years including employer name, job title, start and end dates, and address.</span>
                    </div>
                </div>
                
                <div class="form-field">
                    <label for="travelHistory">Travel History (Last 5 Years) *</label>
                    <textarea id="travelHistory" required placeholder="List all trips outside the US in the last 5 years"></textarea>
                    <button class="help-button" onclick="showFieldHelp('travelHistory')">Help</button>
                    <div class="help-content" id="travelHistory-help">
                        <strong data-translate="aiHelp">AI Help:</strong> <span data-translate="aiHelpTravel">List all trips you've taken outside the US in the last 5 years including destination, departure date, return date, and purpose.</span>
                    </div>
                </div>
                
                <div class="form-field">
                    <label for="criminalHistory">Criminal History</label>
                    <textarea id="criminalHistory" placeholder="Disclose any arrests, citations, or convictions"></textarea>
                    <button class="help-button" onclick="showFieldHelp('criminalHistory')">Help</button>
                    <div class="help-content" id="criminalHistory-help">
                        <strong data-translate="aiHelp">AI Help:</strong> <span data-translate="aiHelpCriminal">Disclose any arrests, citations, or convictions. Include traffic violations that resulted in fines over $500 or jail time.</span>
                    </div>
                </div>
                
                <div class="form-field">
                    <label for="englishProficiency">English Proficiency *</label>
                    <select id="englishProficiency" required>
                        <option value="">Select Level</option>
                        <option value="Native">Native Speaker</option>
                        <option value="Fluent">Fluent</option>
                        <option value="Good">Good</option>
                        <option value="Fair">Fair</option>
                        <option value="Basic">Basic</option>
                    </select>
                    <button class="help-button" onclick="showFieldHelp('englishProficiency')">Help</button>
                    <div class="help-content" id="englishProficiency-help">
                        <strong data-translate="aiHelp">AI Help:</strong> <span data-translate="aiHelpEnglish">Select your English proficiency level. You'll need to pass an English test during your interview.</span>
                    </div>
                </div>
                
                <div class="form-field">
                    <label for="civicsKnowledge">Civics Knowledge *</label>
                    <select id="civicsKnowledge" required>
                        <option value="">Select Level</option>
                        <option value="Excellent">Excellent</option>
                        <option value="Good">Good</option>
                        <option value="Fair">Fair</option>
                        <option value="Needs Study">Needs Study</option>
                    </select>
                    <button class="help-button" onclick="showFieldHelp('civicsKnowledge')">Help</button>
                    <div class="help-content" id="civicsKnowledge-help">
                        <strong data-translate="aiHelp">AI Help:</strong> <span data-translate="aiHelpCivics">Select your knowledge of US history and government. You'll need to pass a civics test during your interview.</span>
                    </div>
                </div>
            `;
        }
        
        function translatePage() {
            const elements = document.querySelectorAll('[data-translate]');
            elements.forEach(element => {
                const key = element.getAttribute('data-translate');
                const translation = translations[currentLanguage][key];
                if (translation) {
                    element.textContent = translation;
                }
            });
            
            // Translate all form fields dynamically
            translateFormFields();
            
            // Update form-specific content
            updateFormForType(selectedFormType);
            
            showNotification(`${translations[currentLanguage].pageTranslated} ${currentLanguage.toUpperCase()}`, 'success');
        }
        
        function translateFormFields() {
            const formFields = document.querySelectorAll('.form-field');
            formFields.forEach(field => {
                const label = field.querySelector('label');
                const input = field.querySelector('input, select, textarea');
                const helpButton = field.querySelector('.help-button');
                
                if (label && input) {
                    const fieldId = input.id;
                    const labelText = translations[currentLanguage][fieldId];
                    const placeholderText = translations[currentLanguage]['enter' + fieldId.charAt(0).toUpperCase() + fieldId.slice(1)];
                    
                    if (labelText) {
                        label.textContent = labelText + (input.required ? ' *' : '');
                    }
                    
                    if (placeholderText && input.placeholder) {
                        input.placeholder = placeholderText;
                    }
                    
                    // Translate help button
                    if (helpButton) {
                        helpButton.textContent = currentLanguage === 'es' ? 'Ayuda' : 'Help';
                    }
                    
                    // Translate select options
                    if (input.tagName === 'SELECT') {
                        const options = input.querySelectorAll('option');
                        options.forEach(option => {
                            const optionKey = option.value.toLowerCase().replace(/\s+/g, '');
                            const translatedOption = translations[currentLanguage][optionKey];
                            if (translatedOption && option.value !== '') {
                                option.textContent = translatedOption;
                            }
                        });
                    }
                }
            });
        }
        
        function showFieldHelp(fieldId) {
            const helpElement = document.getElementById(fieldId + '-help');
            const allHelpElements = document.querySelectorAll('.help-content');
            
            // Hide all other help elements
            allHelpElements.forEach(help => {
                if (help !== helpElement) {
                    help.classList.remove('show');
                }
            });
            
            // Update help content in current language
            if (helpElement) {
                updateHelpContent(helpElement, fieldId);
                helpElement.classList.toggle('show');
            }
        }
        
        function updateHelpContent(helpElement, fieldId) {
            const aiHelpKey = 'aiHelp' + fieldId.charAt(0).toUpperCase() + fieldId.slice(1);
            const aiHelpText = translations[currentLanguage][aiHelpKey];
            
            if (aiHelpText) {
                const strongElement = helpElement.querySelector('strong');
                const spanElement = helpElement.querySelector('span');
                
                if (strongElement) {
                    strongElement.textContent = translations[currentLanguage].aiHelp + ' ';
                }
                if (spanElement) {
                    spanElement.textContent = aiHelpText;
                }
            }
        }
        
        function loadSavedData() {
            const savedData = localStorage.getItem('documentData');
            if (savedData) {
                const data = JSON.parse(savedData);
                Object.entries(data).forEach(([key, value]) => {
                    const field = document.getElementById(key);
                    if (field) {
                        field.value = value;
                    }
                });
            }
        }
        
        function saveProgress() {
            const formData = {};
            const inputs = document.querySelectorAll('input, select, textarea');
            inputs.forEach(input => {
                if (input.value.trim() !== '') {
                    formData[input.id] = input.value;
                }
            });
            
            localStorage.setItem('documentData', JSON.stringify(formData));
            showNotification(translations[currentLanguage].progressSaved, 'success');
        }
        
        function goBack() {
            window.location.href = 'complete-application.html';
        }
        
        function submitApplication() {
            // Validate required fields
            const requiredFields = document.querySelectorAll('input[required], select[required], textarea[required]');
            let isValid = true;
            let missingFields = [];
            
            requiredFields.forEach(field => {
                if (!field.value.trim()) {
                    field.style.borderColor = '#e74c3c';
                    isValid = false;
                    const label = field.previousElementSibling;
                    if (label) {
                        missingFields.push(label.textContent.replace(' *', ''));
                    }
                } else {
                    field.style.borderColor = '#e9ecef';
                }
            });
            
            if (!isValid) {
                const errorMessage = translations[currentLanguage].pleaseFillRequired + '\n' + missingFields.join(', ');
                showNotification(errorMessage, 'error');
                return;
            }
            
            // Save final data
            saveProgress();
            
            // Show AI-powered submission process
            showAISubmissionProcess();
        }
        
        function showAISubmissionProcess() {
            // Show AI processing steps
            const steps = [
                translations[currentLanguage].aiProcessing1,
                translations[currentLanguage].aiProcessing2,
                translations[currentLanguage].aiProcessing3,
                translations[currentLanguage].aiProcessing4
            ];
            
            let currentStep = 0;
            const processInterval = setInterval(() => {
                if (currentStep < steps.length) {
                    showNotification(steps[currentStep], 'info');
                    currentStep++;
                } else {
                    clearInterval(processInterval);
                    showNotification(translations[currentLanguage].applicationSubmitted, 'success');
                    
                    // Redirect to success page
                    setTimeout(() => {
                        window.location.href = 'index.html';
                    }, 2000);
                }
            }, 1000);
        }
        
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 6px;
                color: white;
                font-weight: 500;
                z-index: 1000;
                animation: slideIn 0.3s ease-out;
                ${type === 'success' ? 'background: #27ae60;' : type === 'error' ? 'background: #e74c3c;' : 'background: #3498db;'}
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }
    </script>
</body>
</html>
